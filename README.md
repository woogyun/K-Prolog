# K-Prolog


K-Prolog: 한글 Prolog 인터프리터입니다.

## 실행 방법
Python 3.10 이상을 설치한 후 다음 명령을 수행합니다.
``` shell
$ python main.py
```

일괄 프로그래밍(batch programming) 형태로 작성된 파일을 수행하려면 다음과 같이 파일 이름을 인수로 전달합니다.
``` shell
$ python main.py gcd_batch.kpl
```

## K-Prolog 인터프리터 명령어
다음과 같은 명령어를 K-Prolog 셸에서 사용할 수 있습니다.
``` shell
[파일기본이름].
적재(파일기본이름).
재적재.
목록.
종료.
```

다음은 디버깅(debugging)에 사용되는 명령어입니다.
``` shell
추적.
다음.
중단.
나가기.
추적중단.
종료.
```

## K-Prolog의 관례
Prolog와 다른, K-Prolog의 관례를 간단히 설명하겠습니다.
Prolog는 대문자를 변수로 취급합니다. K-Prolog에서 변수는 밑줄(`_`)로 시작합니다.

Prolog에서 수식의 값을 구할 때는 `is`를 사용하지만 K-Prolog에서는 대입 연산자 `:=`를 이용합니다. 예컨대 다음과 같은 술어를 사용하면
```prolog
_합 := 12 + 13.
```
변수 `_합`의 값은 `25`가 됩니다.

### 산술 연산
K-Prolog에서는 이항 사칙연산자(`+`, `-`, `*`, `/`)를 사용할 수 있습니다. 
정수 나눗셈을 수행하려면 Python처럼 `//`를 사용합니다. 
나머지 연산자는 `나머지`입니다. `%`가 아니라는 점에 주의해야 합니다.

### 비교 연산
K-Prolog의 이항 비교 연산자 중 `<`, `>`, `>=`는 Python과 유사합니다.
다만 이하 연산자는 Python과 달리 `=<`를 사용합니다. 
같다 연산자는 `=:=`, 같지 않다 연산자는 `=\=`로서 다른 언어와 상당히 다른 형태입니다.
등호 `=`는 동형화(unification)에 사용된다는 점에 주의하기 바랍니다.

### 주석
퍼센트 `%` 문자 이하 줄바꿈문자(newline)까지는 주석으로 취급됩니다.

## 기본 술어(built-in predicates)
Prolog에 사용되는 기본 술어를 K-Prolog에서 어떻게 사용할 수 있는지 알파벳 순으로 정리하면 다음과 같습니다.
``` shell
asserta         추가
atomic          상수인가
atom_concat     상수연결
atom_chars      문자리스트
append          접합
between         이내
char_code       문자코드
display         출력에쓰기
fail            포기
findall         모두찾기
flatten         평평히
forall          모두만족
initialization  초기화
integer         정수인가
is              :=
is_list         리스트인가
keysort         키정렬
length          길이
maplist         목록에적용
member          원소
memberchk       원소점검
mod             나머지
nl              줄바꿈
nonvar          변수아닌가
not             논리부정
number          수
ord_subset      서열부분집합
permutation     순열
read            읽기
recorda         레코드기록
reverse         거꾸로
select          선택
setof           집합
sort            정렬
subtract        원소제거
write           쓰기
writeln         쓰고줄바꿈
```
새로 추가했으면 하는 술어가 있다면 이메일로 연락 주시기 바랍니다.

<!--
### Mac
Mac 운영체제에서는 dist 폴더의 k-prolog 파일을 터미널에서 다음과 같이 실행합니다.  
표준 Prolog 명령줄 인터페이스를 사용하려면, 다음 명령을 입력하세요:
``` shell
./k-prolog 
```
시작할 때 K-Prolog 파일(.kpl)을 먼저 적재하려면, 다음과 같이 두 번째 인자로 파일 이름을 지정하세요:
``` shell
./k-prolog filename.kpl
```

### Linux
Linux 운영체제에서는 dist 폴더의 k-prolog 파일을 터미널에서 다음과 같이 실행합니다.  
표준 Prolog 명령줄 인터페이스를 사용하려면, 다음 명령을 입력하세요:
``` shell
./k-prolog 
```
시작할 때 K-Prolog 파일(.kpl)을 먼저 적재하려면, 다음과 같이 두 번째 인자로 파일 이름을 지정하세요:
``` shell
./k-prolog filename.kpl
```

### Windows
Windows 운영체제에서는 dist 폴더의 k-prolog.exe 파일을 명령 프롬프트에서 다음과 같이 실행합니다. 
표준 Prolog 명령줄 인터페이스를 사용하려면, 다음 명령을 입력하세요:
```shell
k-prolog.exe
```
시작할 때 K-Prolog 파일(.kpl)을 먼저 로드하려면, 다음과 같이 두 번째 인자로 파일 이름을 지정하세요:
```shell
k-prolog.exe filename.kpl
```
-->


## K-Prolog 코드 예
K-Prolog로 작성한 코드 예를 두 개 살펴보겠습니다.
먼저 최대공약수 및 최소공배수 예(`gcd.kpl`)입니다.

``` prolog
최대공약수(_엑스, 0, _엑스) :- _엑스 > 0.
최대공약수(_엑스, _와이, _지) :-
    _와이 > 0,
    (_엑스 < _와이 ->
        최대공약수(_와이, _엑스, _지)
    ;
        _디 := _엑스 - _와이,
        최대공약수(_와이, _디, _지)).

최소공배수(_엑스, _와이, _엘) :-
    최대공약수(_엑스, _와이, _지),
    _피 := _엑스 * _와이,
    _엘 := _피 // _지.

메인 :-
    읽기(_엑스),
    읽기(_와이),
    최대공약수(_엑스, _와이, _지),
    쓰고줄바꿈(_지),
    최소공배수(_엑스, _와이, _엘),
    쓰고줄바꿈(_엘),
    종료.

:- 초기화(메인).
```

다음은 N명의 여왕 문제(N-queens) 프로그램입니다.

``` prolog
퀸들(_엔,_큐에스) :- 범위(1,_엔,_엔에스), 순열(_엔에스,_큐에스), 안전(_큐에스).

안전([]).
안전([_큐|_큐에스]) :- 안전(_큐에스), 논리부정(공격(_큐,_큐에스)).

공격(_엑스,_엑스에스) :- 공격(_엑스,1,_엑스에스).
공격(_엑스,_엔,[_와이|_]) :- _엑스 := _와이+_엔; _엑스 := _와이-_엔.
공격(_엑스,_엔,[_|_와이에스]) :- _엔1 := _엔+1, 공격(_엑스,_엔1,_와이에스).

범위(_엔,_엔,[_엔]).
범위(_엠,_엔,[_엠|_엔에스]) :- _엠 < _엔, _엠1 := _엠+1, 범위(_엠1,_엔,_엔에스).

메인 :-
    쓰고줄바꿈("N-Queens 문제 해결기"),
    쓰고줄바꿈("보드 크기를 입력하세요:"),
    읽기(_크기),
    모두찾기(_해답, 퀸들(_크기, _해답), _모든해답),
    ( _모든해답 = [] ->
        쓰고줄바꿈('해답이 없습니다.')
    ;
        해답출력(_모든해답, 1)
    ).

해답출력([], _).
해답출력([_해답|_나머지], _번호) :- 
    쓰기("해답 "), 쓰기(_번호), 쓰기(": "),
    쓰고줄바꿈(_해답),
    _다음번호 := _번호 + 1,
    해답출력(_나머지, _다음번호).
```

## 테스트 입력: 명령줄 인터페이스

``` prolog
?- [nqueen].
nqueen.kpl에서 적재했습니다.
?- 메인.
N-Queens 문제 해결기
보드 크기를 입력하세요:
|: 4.
해답 1: [2, 4, 1, 3]
해답 2: [3, 1, 4, 2]

?- 메인.
N-Queens 문제 해결기
보드 크기를 입력하세요:
|: 6.
해답 1: [2, 4, 6, 1, 3, 5]
해답 2: [3, 6, 2, 5, 1, 4]
해답 3: [4, 1, 5, 2, 6, 3]
해답 4: [5, 3, 1, 6, 4, 2]
```

## Windows용 배치 파일
K-Prolog 프로그램 파일은 UTF-8 인코딩으로 작성해야 합니다.
이를 Windows의 명령 프롬프트(`cmd`) 창에서 보려면 문자 인코딩을 UTF-8 인코딩(코드페이지 65001)으로 바꾸어야 합니다.
이때 `WinCmds` 폴더의 다음 명령어를 사용할 수 있습니다.
```
gokp
```
다시 원래 인코딩(코드페이지 949, EUC-KR 호환)으로 명령 프롬프트를 회복하려면, 같은 폴더의 다음 명령어를 사용하기 바랍니다.
```
pkog
```


## Authors
* 이유민, yunmin.lee@tufts.edu, [Yumin (Alexis) Lee](https://www.linkedin.com/in/alexis-yumin-lee)
* 우균, woogyun@pnu.edu, [Gyun Woo](https://github.com/woogyun)
